/*
 *  patch-panel - v1.0
 *  A responsive panel plugin for grid layouts.
 *  http://alecortega.com
 *
 *  Made by Alec Ortega
 *  Under MIT License
 */
!function(a,b){"use strict";function c(b,c){this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.$itemCollection=a(this.element).children(this._defaults.itemSelector),this.init()}var d="patchpanel",e={buttonSelector:".patch-button",itemSelector:".patch-item",panelSelector:".patch-panel"};a.extend(c.prototype,{init:function(){this.hideAllPanels(),this.bindPatchButton(this.isPanelOpen,this.appendPanel,this.element,this.$itemCollection,this.togglePanel),this.bindCloseOnResize(this.togglePanel,this.isPanelOpen)},bindPatchButton:function(b,c,d,f,g){a(e.buttonSelector).on("click",function(){var h=this,i=a(e.panelSelector+"[data-patch-panel="+h.getAttribute("data-patch-panel")+"]");b()?b().attr("data-patch-panel")===i.attr("data-patch-panel")?g(i):b().attr("data-patch-panel")!==i.attr("data-patch-panel")&&(c(h,i,d,f),a(b()).toggleClass("open").slideToggle(300,function(){g(i)})):(c(h,i,d,f),g(i))})},bindCloseOnResize:function(c,d){a(b).on("resize",function(){d()&&c(d())})},isPanelOpen:function(){var b=a(e.panelSelector+".open");return b.length>0?b:!1},hideAllPanels:function(){a(e.panelSelector).hide()},appendPanel:function(b,c,d,f){var g=a(b).closest(e.itemSelector),h=a(f).index(g),i=g.position(),j=Math.round(a(d).width()/g.width()),k=Math.floor(i.left/g.width())+1;console.log(k),console.log(j),a(f[h+(j-k)]).append().after(c)},togglePanel:function(a){a.toggleClass("open").slideToggle(300)}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);